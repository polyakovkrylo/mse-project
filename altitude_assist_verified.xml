<?xml version="1.0" encoding="utf-8"?><!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_1.dtd'><nta><declaration>// Place global declarations here.
int pitch = 9;
int altitude = 190;
bool AltitudeAssistance_enabled = true;
clock t;
int throttle = 9;
int pitch_input = 2;

broadcast chan AltitudeAssistance_mode;
chan landing_possible;

const int LANDING_ALTITUDE = 5;
const int RECOVERY_TIMEOUT = 3;
const int STALL_ANGLE = 10;
const int VERTICAL_ANGLE = 40;
const int MIN_LANDING_PITCH = 15;
</declaration><template><name x="5" y="5">FeatureCandiateRole_StateMachine</name><declaration>// Place local declarations here.
</declaration><location id="id0" x="-32" y="16"><name x="-42" y="-14">enabled</name></location><location id="id1" x="-48" y="-240"><name x="-58" y="-270">Disabled</name></location><location id="id2" x="-48" y="-376"><name x="-58" y="-406">Idle</name></location><init ref="id2"/><transition><source ref="id0"/><target ref="id1"/><label kind="guard" x="-40" y="-80">AltitudeAssistance_enabled == false</label><nail x="88" y="-120"/></transition><transition><source ref="id1"/><target ref="id0"/><label kind="guard" x="-280" y="-184">AltitudeAssistance_enabled == true</label><label kind="synchronisation" x="-232" y="-112">AltitudeAssistance_mode!</label><nail x="-152" y="-120"/></transition><transition><source ref="id2"/><target ref="id1"/></transition></template><template><name>AltitudeDataSenderRole_StateMachine</name><location id="id3" x="-112" y="-248"><name x="-122" y="-278">steady</name></location><location id="id4" x="-504" y="-96"><name x="-514" y="-126">landing</name></location><location id="id5" x="16" y="72"><name x="6" y="42">stall_recovery</name></location><location id="id6" x="176" y="-184"><name x="166" y="-214">emergency_manual</name></location><location id="id7" x="-104" y="-144"><name x="-114" y="-174">flight</name></location><location id="id8" x="-112" y="-376"><name x="-106" y="-406">idle</name></location><init ref="id8"/><transition><source ref="id4"/><target ref="id3"/></transition><transition><source ref="id3"/><target ref="id7"/></transition><transition><source ref="id8"/><target ref="id3"/><label kind="synchronisation" x="-172" y="-327">AltitudeAssistance_mode?</label></transition><transition><source ref="id4"/><target ref="id7"/><label kind="guard" x="-400" y="-8">altitude &gt; LANDING_ALTITUDE</label><nail x="-264" y="-24"/></transition><transition><source ref="id5"/><target ref="id7"/><label kind="guard" x="-128" y="32">pitch &gt;= 0</label><nail x="-168" y="-8"/></transition><transition><source ref="id5"/><target ref="id6"/><label kind="guard" x="40" y="80">t&gt;=6</label><label kind="assignment" x="36" y="-56">pitch =0</label></transition><transition><source ref="id6"/><target ref="id7"/><label kind="guard" x="-24" y="-194">pitch &gt;= 0</label></transition><transition><source ref="id7"/><target ref="id4"/><label kind="guard" x="-432" y="-152">altitude &lt; LANDING_ALTITUDE</label><label kind="synchronisation" x="-364" y="-135">landing_possible?</label></transition><transition><source ref="id7"/><target ref="id5"/><label kind="guard" x="-112" y="-56">pitch &lt; STALL_ANGLE</label><label kind="assignment" x="-104" y="-36">pitch = 0, t:=0</label></transition></template><template><name>AltAssistStateMachine</name><location id="id9" x="-672" y="-96"><name x="-664" y="-104">stall_recovery</name></location><location id="id10" x="-672" y="-472"><name x="-682" y="-502">vertical_climbing</name></location><location id="id11" x="-960" y="-96"><name x="-970" y="-126">emergency_manual</name></location><location id="id12" x="-1040" y="-312"><name x="-1050" y="-342">steady</name></location><location id="id13" x="-672" y="-312"><name x="-682" y="-342">flight</name></location><location id="id14" x="-168" y="-312"><name x="-178" y="-342">blocking</name></location><location id="id15" x="-1040" y="-472"><name x="-1050" y="-502">idle</name></location><init ref="id15"/><transition><source ref="id9"/><target ref="id13"/><label kind="guard" x="-632" y="-240">pitch &gt;= 0</label><nail x="-560" y="-160"/></transition><transition><source ref="id10"/><target ref="id13"/><label kind="guard" x="-888" y="-464">pitch &lt; VERTICAL_ANGLE</label><nail x="-828" y="-410"/></transition><transition><source ref="id14"/><target ref="id13"/><label kind="guard" x="-480" y="-208">altitude &gt; LANDING_ALTITUDE || pitch &gt; MIN_LANDING_PITCH</label><nail x="-392" y="-168"/></transition><transition><source ref="id11"/><target ref="id13"/><label kind="guard" x="-876" y="-234">pitch &gt;= 0</label></transition><transition><source ref="id9"/><target ref="id11"/><label kind="guard" x="-688" y="-88">t&gt;=6</label><label kind="assignment" x="-1016" y="-96">pitch = 0</label></transition><transition><source ref="id13"/><target ref="id14"/><label kind="guard" x="-608" y="-344">altitude &lt; LANDING_ALTITUDE &amp;&amp; pitch &lt;= MIN_LANDING_PITCH</label><label kind="synchronisation" x="-480" y="-327">landing_possible!</label><label kind="assignment" x="-480" y="-312">pitch = 20</label></transition><transition><source ref="id13"/><target ref="id10"/><label kind="guard" x="-712" y="-416">pitch &gt; VERTICAL_ANGLE</label></transition><transition><source ref="id13"/><target ref="id9"/><label kind="guard" x="-744" y="-200">pitch &lt; STALL_ANGLE</label><label kind="assignment" x="-712" y="-136">pitch = 0,t:=0</label></transition><transition><source ref="id12"/><target ref="id13"/><label kind="guard" x="-916" y="-342">throttle &gt; 0</label></transition><transition><source ref="id15"/><target ref="id12"/><label kind="synchronisation" x="-1100" y="-407">AltitudeAssistance_mode?</label></transition></template><template><name>Sync_sm</name><location id="id16" x="-352" y="-176"><name x="-402" y="-222">emergency_manual</name></location><location id="id17" x="-376" y="-448"><name x="-392" y="-488">flight</name></location><location id="id18" x="-160" y="-184"><name x="-170" y="-214">stall_recovery</name></location><location id="id19" x="128" y="-408"><name x="118" y="-438">blocking</name></location><location id="id20" x="-592" y="-320"><name x="-602" y="-350">steady</name></location><location id="id21" x="-312" y="-640"><name x="-322" y="-670">vertical_climbing</name></location><location id="id22" x="-144" y="-504"><name x="-154" y="-534">landing</name></location><location id="id23" x="-744" y="-520"><name x="-768" y="-552">disabled</name></location><location id="id24" x="-592" y="-448"><name x="-602" y="-478">enabled</name></location><location id="id25" x="-912" y="-520"><name x="-922" y="-550">idle</name></location><init ref="id25"/><transition><source ref="id19"/><target ref="id17"/><label kind="guard" x="-184" y="-336">altitude &gt; LANDING_ALTITUDE</label><nail x="-144" y="-296"/></transition><transition><source ref="id16"/><target ref="id17"/><label kind="guard" x="-440" y="-336">pitch &gt;= 0</label></transition><transition><source ref="id18"/><target ref="id16"/><label kind="guard" x="-168" y="-168">t&gt;=6</label></transition><transition><source ref="id17"/><target ref="id18"/><label kind="guard" x="-328" y="-304">pitch &lt; STALL_ANGLE</label><label kind="assignment" x="-328" y="-316">t:=0</label></transition><transition><source ref="id19"/><target ref="id22"/><label kind="guard" x="-208" y="-424">pitch_input &gt; 0 || pitch &gt; MIN_LANDING_PITCH</label><nail x="-200" y="-392"/></transition><transition><source ref="id22"/><target ref="id19"/><label kind="guard" x="-80" y="-488">pitch &lt; MIN_LANDING_PITCH</label></transition><transition><source ref="id17"/><target ref="id22"/><label kind="guard" x="-344" y="-504">altitude &lt; LANDING_ALTITUDE</label></transition><transition><source ref="id21"/><target ref="id17"/><label kind="guard" x="-568" y="-624">pitch &lt; VERTICAL_ANGLE</label><nail x="-488" y="-568"/></transition><transition><source ref="id17"/><target ref="id21"/><label kind="guard" x="-376" y="-576">pitch &gt; VERTICAL_ANGLE</label></transition><transition><source ref="id20"/><target ref="id17"/><label kind="guard" x="-544" y="-400">throttle &gt; 0</label></transition><transition><source ref="id24"/><target ref="id23"/><label kind="guard" x="-872" y="-432">AltitudeAssistance_enabled == false</label><nail x="-720" y="-424"/></transition><transition><source ref="id24"/><target ref="id20"/></transition><transition><source ref="id23"/><target ref="id24"/><label kind="guard" x="-720" y="-512">AltitudeAssistance_enabled == true</label></transition><transition><source ref="id25"/><target ref="id23"/></transition></template><system>// Place template instantiations here.
ProcessFeature = FeatureCandiateRole_StateMachine();
ProcessAltitudeDataSender = AltitudeDataSenderRole_StateMachine();
ProcessAltAssist = AltAssistStateMachine();
ProcessSync_sm = Sync_sm();
// List one or more processes to be composed into a system.
system ProcessFeature, ProcessAltitudeDataSender,ProcessAltAssist,ProcessSync_sm;</system></nta>